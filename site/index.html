<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistema Petrobras/Traspetro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/header.css">
    <link rel="stylesheet" href="assets/css/flash-cards.css">
    <link rel="stylesheet" href="assets/css/ler-pdf.css">
    <link rel="stylesheet" href="assets/css/secao-praticar.css">
    <link rel="stylesheet" href="assets/css/secao-banco.css">
    <link rel="stylesheet" href="assets/css/secao-leitor-pdf.css">
    <link rel="stylesheet" href="assets/css/secao-stats.css">
    <link rel="stylesheet" href="assets/css/secao-caderno.css">
    <link rel="stylesheet" href="assets/css/secao-simulado.css">
    <link rel="stylesheet" href="assets/css/secao-estatisticas.css">
    <link rel="stylesheet" href="assets/css/secao-plano.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon/favicon-16x16.png">
    <link rel="manifest" href="/assets/img/favicon/site.webmanifest">
</head>

<body>
    <div id="loader-overlay">
        <div class="spinner"></div>
        <div id="loader-msg">Processando...</div>
    </div>

    <header id="main-header">
        <div class="container flex">
            <div class="logo">
                <h4>Concurso Petrobras/Traspetro</h4>
            </div>
            <nav>
                <button id="nav-cadastro" onclick="nav('cadastro')">Cadastrar</button>
                <button id="nav-banco" onclick="nav('banco')">Banco</button>
                <button id="nav-praticar" onclick="nav('praticar')">Praticar</button>
                <button id="nav-flashcards" onclick="nav('flashcards')">Flashcards</button>
                <button id="nav-caderno" onclick="nav('caderno')">Caderno</button>
                <button id="nav-estatisticas" onclick="nav('estatisticas')">Estat√≠sticas</button>
                <button id="nav-plano" onclick="nav('plano')">Plano de Estudos</button>
                <button id="nav-importar" onclick="nav('importar')">Importar PDF</button>
                <button id="btn-tema" onclick="toggleTema()" title="Alternar Tema (Claro/Escuro)"></button>
            </nav>
        </div>
    </header>

    <div id="floating-toolbar" class="floating-toolbar">
        <button onmousedown="event.preventDefault(); fmtUlt('b')" title="Negrito">B</button>
        <button onmousedown="event.preventDefault(); fmtUlt('i')" title="It√°lico">I</button>
        <button onmousedown="event.preventDefault(); fmtUlt('u')" title="Sublinhado">U</button>
        <button onmousedown="event.preventDefault(); fmtUlt('sub')" title="Subscrito (Ex: H‚ÇÇO)">x‚ÇÇ</button>
        <button onmousedown="event.preventDefault(); fmtUlt('sup')" title="Sobrescrito (Ex: x¬≤)">x¬≤</button>
        <button onmousedown="event.preventDefault(); fmtUlt('mark')" title="Destaque">üñç</button>
        <button onmousedown="event.preventDefault(); fmtListUlt('ul')" title="Lista com Marcadores" style="font-size: 1.2rem;">‚Ä¢</button>
        <button onmousedown="event.preventDefault(); fmtListUlt('ol')" title="Lista Numerada" style="font-size: 0.9rem;">123</button>
        <button onmousedown="event.preventDefault(); repararTextoSmart()" title="Ajustar Quebras de PDF">‚ú®</button>
    </div>

    <datalist id="lista-bancas"></datalist>
    <datalist id="lista-instituicoes"></datalist>
    <datalist id="lista-disciplinas"></datalist>
    <datalist id="lista-assuntos"></datalist>

    <section id="secao-cadastro" class="secao">
        <div class="container">
            <h2>Cadastrar Quest√£o</h2>
            <form id="form-cadastro">
                <div class="input-group" style="margin-bottom: 15px; border: 1px solid #ddd; padding: 10px; border-radius: 5px; background: #fdfdfd;">
                    <label style="font-weight:bold; color:var(--primary)">Texto de Apoio (Opcional)</label>
                    <div style="display:flex; gap:10px;">
                        <select class="sel-texto-apoio" style="flex-grow:1;">
                            <option selected value="">-- Sem Texto de Apoio --</option>
                            </select>
                        <button type="button" class="btn-padrao" onclick="abrirModalTexto()">+ Novo Texto</button>
                    </div>
                    <div class="preview-texto-apoio" style="font-size:0.8em; color:#666; margin-top:5px; max-height:60px; overflow:hidden; font-style:italic;"></div>
                </div>
                <label>Enunciado:</label><textarea id="cad-enunciado" class="input-com-toolbar" rows="4" required
                    onfocus="showToolbar(this)"></textarea>
                <label>Imagem (Opcional):</label><input type="file" id="cad-imagem" accept="image/*">
                <div class="filtro-grid">
                    <input type="text" id="cad-banca" list="lista-bancas" placeholder="Banca (Selecione ou Digite)"
                        required>
                    <input type="text" id="cad-instituicao" list="lista-instituicoes" placeholder="Institui√ß√£o">
                    <input type="number" id="cad-ano" placeholder="Ano">
                    <input type="text" id="cad-disciplina" list="lista-disciplinas" placeholder="Disciplina" required
                        onchange="carregarAssuntos('cad')">
                </div>
                <div class="filtro-grid">
                    <input type="text" id="cad-assunto" list="lista-assuntos"
                        placeholder="Assunto (Digite ou Selecione)" required>
                    <select id="cad-dificuldade">
                        <option>F√°cil</option>
                        <option selected>M√©dio</option>
                        <option>Dif√≠cil</option>
                    </select>
                </div>
                <select id="cad-tipo" onchange="altTipo('cad')">
                    <option value="ME">M√∫ltipla Escolha</option>
                    <option value="CE">Certo/Errado</option>
                </select>
                <div id="cad-container-alt">
                    <div class="input-group"><span>A)</span><input type="text" id="cad-alt-a"
                            onfocus="showToolbar(this)"></div>
                    <div class="input-group"><span>B)</span><input type="text" id="cad-alt-b"
                            onfocus="showToolbar(this)"></div>
                    <div class="input-group"><span>C)</span><input type="text" id="cad-alt-c"
                            onfocus="showToolbar(this)"></div>
                    <div class="input-group"><span>D)</span><input type="text" id="cad-alt-d"
                            onfocus="showToolbar(this)"></div>
                    <div class="input-group"><span>E)</span><input type="text" id="cad-alt-e"
                            onfocus="showToolbar(this)"></div>
                </div>
                <label>Gabarito:</label>
                <select id="cad-gabarito" required></select>
                <label>Coment√°rios</label>
                <textarea id="cad-comentario" class="input-com-toolbar" rows="15" onfocus="showToolbar(this)"></textarea>
                <button type="submit" class="btn-acao">Salvar</button>
            </form>
        </div>
    </section>

    <section id="secao-importar" class="secao">
        <div class="container">
            <h2>Importar de PDF</h2>
            <div id="area-drop" class="filtro-grid"
                style="background:#f9f9f9; padding:25px; border-radius:6px; margin-bottom:20px; position:relative;">
                <div id="msg-drop"
                    style="position:absolute; top:-15px; left:50%; transform:translateX(-50%); background:#27ae60; color:white; padding:2px 10px; border-radius:4px; font-size:0.8rem;">
                    Solte o arquivo aqui!</div>
                <div style="grid-column: span 2; display: flex; gap: 10px; align-items: center;">
                    <input type="file" id="imp-file" accept="application/pdf" style="background:#fff; width:100%">
                    <button class="btn-acao" onclick="lerPDF()"
                        style="margin:5px 0; width:150px; background:#27ae60">Ler PDF</button>
                </div>
                <input type="text" id="imp-disciplina" list="lista-disciplinas" placeholder="Disciplina Padr√£o"
                    onchange="carregarAssuntos('imp')">
                <input type="text" id="imp-assunto" oninput="aplicarAssuntoGlobal()" list="lista-assuntos" placeholder="Assunto Global...">
            </div>
            <div id="imp-preview-container" style="display:none">
                <h3 id="imp-titulo-preview">Pr√©via</h3>
                <div class="preview-header">
                    <div style="width:40px">#</div>
                    <div style="width:150px; margin-right:10px">Banca/Ano</div>
                    <div style="flex-grow:1">Enunciado / Alternativas (Edit√°vel)</div>
                    <div style="width:60px; text-align:center">Gab</div>
                    <div style="width:60px; text-align:center">A√ß√µes</div>
                </div>
                <div id="imp-lista-questoes">
                </div>
            </div>
        </div>
    </section>

    <section id="secao-banco" class="secao">
        <div class="container">
            <div class="banco-tabs" style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button class="btn-padrao active" id="btn-tab-questoes" onclick="alternarVisaoBanco('questoes')">Gerenciar Quest√µes</button>
                <button class="btn-padrao" id="btn-tab-textos" onclick="alternarVisaoBanco('textos')" style="background: var(--purple); color: white;">Gerenciar Textos</button>
            </div>

            <div id="container-questoes-banco">
                <div class="flex banco-header">
                    <h2>Banco de Quest√µes</h2>
                    <span id="total-db" style="color:#777"></span>
                </div>

                <div class="filtro-grid" style="background:#f9f9f9;padding:10px;border-radius:6px">
                    <input type="text" id="busca-texto" placeholder="Buscar..." onkeyup="filtrar()">
                    <select id="busca-disciplina" onchange="carregarAssuntos('busca'); filtrar()"></select>
                    <select id="busca-assunto" onchange="filtrar()">
                        <option value="">Todos Assuntos</option>
                    </select>
                    <select id="busca-banca" onchange="filtrar()"></select>
                    <select id="busca-instituicao" onchange="filtrar()">
                        <option value="">Institui√ß√£o...</option>
                    </select>
                    <select id="busca-dificuldade" onchange="filtrar()">
                        <option value="">Dif.</option>
                        <option>F√°cil</option>
                        <option>M√©dio</option>
                        <option>Dif√≠cil</option>
                    </select>
                </div>

                <div style="overflow-x:auto">
                    <table id="tabela-questoes">
                        <thead>
                            <tr>
                                <th width="40" onclick="ord('id')">ID</th>
                                <th width="100">Inser√ß√£o</th>
                                <th width="90">Banca</th>
                                <th width="90">Inst.</th>
                                <th width="50">Ano</th>
                                <th width="100">Disc.</th>
                                <th>Enunciado</th>
                                <th width="100">Assunto</th>
                                <th width="50">Dif</th>
                                <th width="40">Gab</th>
                                <th width="60">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div id="paginacao-container" style="display:flex; justify-content:center; align-items:center; margin-top:20px; gap:10px"></div>
            </div> <div id="container-gerenciador-textos" style="display: none;">
                <div class="flex banco-header">
                    <h2>Gerenciar Textos de Apoio</h2>
                </div>
                
                <div class="acoes-banco" style="display: flex; gap: 10px; margin-bottom: 15px; background:#f9f9f9; padding:10px; border-radius:6px">
                    <input type="text" id="busca-texto-banco" placeholder="Buscar por t√≠tulo ou conte√∫do..." oninput="renderListaTextos()" style="flex-grow: 1;">
                    <button class="btn-prim" onclick="abrirModalTexto()">+ Novo Texto</button>
                </div>
                
                <div style="overflow-x:auto">
                    <table class="tabela-banco" style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: var(--dark-light); text-align: left;">
                                <th style="padding: 12px; width: 60px;">ID</th>
                                <th>T√≠tulo</th>
                                <th>Pr√©via</th>
                                <th style="text-align: center; width: 100px;">A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="corpo-tabela-textos">
                            </tbody>
                    </table>
                </div>
            </div> </div>
    </section>

    <section id="secao-praticar" class="secao">
        <div class="container">
            <div id="prat-config-container">
                <h2>Praticar Quest√µes</h2>
                
                <div style="background: var(--bg-card); padding: 15px; border-radius: 8px; margin-bottom: 20px; display: flex; gap: 20px; border: 1px solid #ddd; box-shadow: var(--shadow);">
                    <label style="cursor:pointer; font-weight:bold;">
                        <input type="radio" name="modo-estudo" value="lista" checked onchange="alternarInterfacePratica('lista')"> Lista de Quest√µes
                    </label>
                    <label style="cursor:pointer; font-weight:bold;">
                        <input type="radio" name="modo-estudo" value="simulado" onchange="alternarInterfacePratica('simulado')"> Simulado Real
                    </label>
                </div>

                <div id="prat-config-lista">
                    <div class="filtro-grid">
                        <select id="prat-disciplina" onchange="carregarAssuntos('prat')"></select>
                        <select id="prat-assunto"><option value="">Todos Assuntos</option></select>
                        <select id="prat-banca"><option value="">Todas as Bancas</option></select>
                        <input type="number" id="prat-qtd" value="10" placeholder="Qtd">
                        <div style="display:flex; align-items:center; gap:5px; margin-top:5px">
                            <input type="checkbox" id="prat-modo-cego">
                            <label for="prat-modo-cego" style="cursor:pointer">Modo Cego</label>
                        </div>
                    </div>
                </div>

                <div id="prat-config-simulado" style="display:none">
                    <div class="filtro-grid">
                        <div><label>Total de Quest√µes:</label><input type="number" id="prova-total" value="10" min="1"></div>
                        <div><label>Tempo (minutos):</label><input type="number" id="prova-tempo" value="30" min="1"></div>
                    </div>
                    <div id="lista-distribuicao-pratica" style="margin-top:15px; background: var(--bg-card); padding: 10px; border-radius: 5px; border: 1px solid #eee;"></div>
                    <div id="total-porc-pratica" style="text-align:right; font-weight:bold; margin-top:10px;">Total: 0%</div>
                </div>

                <button class="btn-acao" onclick="lancarPraticaUnificada()" style="width:100%; margin-top:20px; font-size:1.1rem;">Iniciar Sess√£o de Estudo</button>
            </div>

            <div id="prat-resolucao-container" style="display:none">
                <div id="sessao-barra-tempo" style="display:none; height:6px; background:#eee; margin-bottom:15px; border-radius:10px; overflow:hidden;">
                    <div id="sessao-tempo-fill" style="height:100%; background:var(--acc); width:100%; transition: width 1s linear;"></div>
                </div>

                <div class="flex" style="justify-content:space-between; align-items:center; margin-bottom:20px;">
                    <h3 id="sessao-progresso"></h3>
                    <div style="display:flex; gap:15px; align-items:center">
                        <span id="sessao-timer" style="font-weight:bold; color:var(--acc); display:none; font-size:1.2rem;">00:00</span>
                        <button onclick="cancelarSessaoPratica()" class="btn-sec" style="background:#e74c3c; color:white; padding:5px 12px; border:none; border-radius:4px; cursor:pointer">Sair</button>
                    </div>
                </div>

                <div class="questao-card" id="container-questao-pratica">
                    </div>

                <div id="sessao-controles" style="margin-top:25px; display:flex; gap:12px">
                    <button id="sessao-btn-confirma" class="btn-acao" onclick="confirmarRespostaPratica()">Confirmar Resposta</button>
                    <button id="sessao-btn-prox" class="btn-acao" onclick="proximaQuestaoPratica()" style="display:none">Pr√≥xima Quest√£o</button>
                </div>
                
                <div id="sessao-feedback" style="margin-top:20px; padding:15px; border-radius:8px; display:none"></div>
            </div>
        </div>
    </section>

    <section id="secao-flashcards" class="secao">
        <div class="container">
            <div class="flex" style="margin-bottom: 20px;">
                <h2>üóÇÔ∏è Flashcards</h2>
                <div><button class="btn-acao" style="width:auto; background:#3498db; margin:0 5px"
                        onclick="toggleModeFC('estudo')">üéì Modo Estudo</button><button class="btn-acao"
                        style="width:auto; background:#95a5a6; margin:0" onclick="toggleModeFC('gerenciar')">‚úèÔ∏è
                        Gerenciar</button></div>
            </div>
            <div id="fc-modo-gerenciar" style="display:none">
                <div class="fc-layout">
                    <div>
                        <h4>Cart√µes Existentes</h4><input type="text" id="fc-filtro-ger"
                            placeholder="Filtrar por texto..." onkeyup="renderListaFC()">
                        <div id="fc-lista" class="fc-lista"></div>
                    </div>
                    <div style="padding:20px; border-radius:8px; border:1px solid #eee">
                        <h4 id="fc-titulo-form">Novo Cart√£o</h4>
                        <form id="fc-form"><input type="hidden" id="fc-id">
                            <label>Disciplina:</label><input type="text" id="fc-disciplina" list="lista-disciplinas"
                                required onchange="carregarAssuntos('fc')">
                            <label>Assunto:</label><input type="text" id="fc-assunto" list="lista-assuntos" required>
                            <label>Frente (Pergunta):</label><textarea id="fc-frente" rows="3" class="input-com-toolbar"
                                required onfocus="showToolbar(this)"></textarea><label>Verso
                                (Resposta):</label><textarea id="fc-verso" rows="4" class="input-com-toolbar" required
                                onfocus="showToolbar(this)"></textarea>
                            <div class="flex" style="margin-top:10px"><button type="button" class="btn-acao"
                                    style="background:#95a5a6; width:auto"
                                    onclick="limparFormFC()">Cancelar</button><button type="submit" class="btn-acao"
                                    style="width:auto">Salvar Cart√£o</button></div>
                        </form>
                    </div>
                </div>
            </div>
            <div id="fc-modo-estudo" style="display:none">
                <div class="filtro-grid" style="justify-content:center; max-width:800px; margin:0 auto">
                    <select id="fc-estudo-disc" onchange="carregarAssuntos('fc-estudo')"></select>
                    <select id="fc-estudo-assunto">
                        <option value="">Todos Assuntos</option>
                    </select>
                    <button class="btn-acao" style="margin:5px 0" onclick="iniciarEstudoFC()">Iniciar Revis√£o</button>
                </div>
                <div id="fc-area-jogo" style="display:none; text-align:center">
                    <h3 id="fc-progresso"></h3>
                    <div class="flip-card-container" id="card-ativo" onclick="virarCarta()">
                        <div class="flip-card-inner">
                            <div id="alfinetes" class="alfinetes"></div>
                            <div class="flip-card-front">
                                <span class="fc-tag" id="fc-front-tag"></span>
                                <div class="fc-front-content"></div>
                                <span style="font-size:0.8rem; color:#999; margin-top:20px">(Clique para virar)</span>
                            </div>
                            <div class="flip-card-back">
                                <div class="fc-back-content"></div>
                            </div>
                        </div>
                    </div>
                    <div id="fc-botoes" class="fc-botoes-resposta"><button class="btn-acao"
                            style="background:#e74c3c; width:120px" onclick="respFC(false)">Errei üòì</button><button
                            class="btn-acao" style="background:#27ae60; width:120px" onclick="respFC(true)">Acertei
                            ü§©</button></div>
                </div>
            </div>
        </div>
    </section>

    <section id="secao-caderno" class="secao">
        <div class="container">
            <div class="flex" style="margin-bottom: 20px;">
                <h2>üìì Caderno de Anota√ß√µes</h2>
                <input type="text" id="busca-caderno" placeholder="Filtrar anota√ß√µes..." onkeyup="renderizarCaderno()" style="max-width: 300px;">
            </div>
            
            <div id="lista-anotacoes" class="quadro-anotacoes">
                </div>
        </div>
    </section>

    <section id="secao-estatisticas" class="secao">
        <div class="container">
            <div class="graf-geral">
                <div class="flex" style="justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 id="titulo-estatistica">Desempenho Geral</h2>
                    <button id="btn-voltar-estatistica" class="btn-acao" onclick="graf()" 
                            style="display:none; width:auto; background:#95a5a6; padding: 5px 15px;">
                        ‚¨Ö Voltar para Disciplinas
                    </button>
                </div>

                <div id="legenda-quartis"></div>
                <canvas id="chart"></canvas>
                <hr style="margin: 40px 0; border: 1px solid #eee;">    
            </div>
            <div class="graf-by-tyme">
                <div class="flex" style="justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3>üìà Evolu√ß√£o de Acertos (%)</h3>
                    <div id="stats-resumo-rapido" style="font-size: 0.9rem; color: var(--sec);"></div>
                </div>

                <div style="height: 300px; margin-bottom: 40px;">
                    <canvas id="chart-evolucao"></canvas>
                </div>

                <h3>üïí √öltimas Respostas</h3>
                <div class="row-list">
                    <table id="tabela-historico-recente" style="width: 100%; font-size: 0.85rem;">
                        <thead>
                            <tr style="background: #f8f9fa;">
                                <th style="padding: 10px;">Data</th>
                                <th>Quest√£o</th>
                                <th>Disciplina</th>
                                <th>Assunto</th>
                                <th>Resultado</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
            
        </div>
    </section>

    <section id="secao-plano" class="secao" style="display:none;">
        <div class="container">
            <div class="header-plano" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h2>üìä Plano de Estudos Otimizado (MCDA)</h2>
                <div style="display:flex; gap:10px;">
                    <button id="btn-gerar-plano" class="btn-save" onclick="fluxoGerarPlanoCompleto()">üöÄ Montar Plano</button>
                    <button id="btn-voltar-config" class="btn-save" style="display:none; background:var(--orange);" onclick="voltarParaConfiguracao()">‚öôÔ∏è Remontar Plano</button>
                    <button id="btn-salvar-final" class="btn-save" style="display:none; background:var(--purple);" onclick="salvarPlanoEstudos()">üíæ Salvar Plano</button>
                </div>
            </div>

            <div id="layout-plano-container" style="display:grid; grid-template-columns: 1fr; gap:20px;">
                
                <div id="wrapper-config-inputs" style="display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 20px; align-items: start;">
                    <div class="card" style="padding:15px;">
                        <h4 style="margin-top:0;">‚öñÔ∏è Pesos e Crit√©rios</h4>
                        <div style="overflow-x: auto;">
                            <table style="width:100%; font-size:0.9em; border-collapse: collapse;">
                                <thead>
                                    <tr style="border-bottom:1px solid #ddd; text-align: left;">
                                        <th class="th-disciplina">Disciplina</th>
                                        <th class="th-peso">Peso (0-1)</th>
                                        <th class="th-tipo">Tipo</th>
                                        <th class="th-min">Sess√£o Min</th>
                                        <th class="th-max">Sess√£o Max</th>
                                    </tr>
                                </thead>
                                <tbody id="corpo-pesos-disciplinas"></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card" style="padding:15px;">
                        <h4 style="margin-top:0;">üïí Disponibilidade</h4>
                        
                        <div style="display:flex; gap:10px; margin-bottom:15px; background:#f4f4f4; padding:10px; border-radius:4px;">
                            <div>
                                <label style="font-size:0.8em; display:block;">In√≠cio Grade:</label>
                                <input type="number" id="plan-config-inicio" value="3" min="0" max="12" style="width:50px;">
                            </div>
                            <div>
                                <label style="font-size:0.8em; display:block;">Fim Grade:</label>
                                <input type="number" id="plan-config-fim" value="17" min="13" max="24" style="width:50px;">
                            </div>
                        </div>

                        <div id="container-config-dias" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;"></div>
                        <div style="margin-top:15px; padding:10px; background:#f8f9fa; border-radius:4px; text-align:center;">
                            <strong>Carga Semanal Estimada:</strong> <span id="carga-calculada-total" style="color:var(--purple); font-size:1.1em;">0.0</span>h
                        </div>
                    </div>
                </div>

                <div id="wrapper-resultado-stats" style="display:none;">
                    <div id="painel-agora" style="background:#2c3e50; padding:15px; border-radius:8px; margin-bottom:15px; text-align:center;">
                        <h3 style="color:#ecf0f1; margin-top:0;">üìñ Estudando Agora</h3>
                        <div id="monitor-materia" style="font-size:1.4em; font-weight:bold; color:var(--purple);">Descanso</div>
                        <div id="monitor-tempo-restante" style="font-size:0.9em; color:#bdc3c7;">--:-- restante</div>
                    </div>
                    <div id="lista-sugestao-horas" class="card" style="padding:15px;"></div>
                </div>

                <div id="wrapper-grade-resultado" style="display:none;">
                    <div class="grid-plano-scroll" style="overflow-x:auto; max-height:80vh; border:1px solid #ddd; border-radius:8px;">
                        <table id="tabela-grade-estudos" class="planilha-estudos" style="width:100%; border-collapse: collapse;">
                            <thead style="position: sticky; top: 0; background: white; z-index: 10;">
                                <tr id="header-dias"><th>Hor√°rio</th></tr>
                            </thead>
                            <tbody id="corpo-grade-estudos"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
    </section>

    <div id="modal-edicao" class="modal">
        <div class="modal-content"><span class="close-modal"
                onclick="el('modal-edicao').style.display='none'">&times;</span>
            <h2>Editar</h2>
            <form id="form-edicao"><input type="hidden" id="edit-id">
                <div class="input-group" style="margin-bottom: 15px; border: 1px solid #ddd; padding: 10px; border-radius: 5px; background: #fdfdfd;">
                    <label style="font-weight:bold; color:var(--primary)">Texto de Apoio (Opcional)</label>
                    <div style="display:flex; gap:10px;">
                        <select class="sel-texto-apoio" style="flex-grow:1;">
                            <option selected value="">-- Sem Texto de Apoio --</option>
                        </select>
                        <button type="button" class="btn-padrao" onclick="abrirModalTexto()">+ Novo Texto</button>
                    </div>
                    <div class="preview-texto-apoio" style="font-size:0.8em; color:#666; margin-top:5px; max-height:60px; overflow:hidden; font-style:italic;"></div>
                </div>
                <label>Enunciado:</label><textarea id="edit-enunciado" class="input-com-toolbar" rows="3" required
                    onfocus="showToolbar(this)"></textarea>
                <label>Imagem:</label>
                <div style="display:flex; align-items:center; gap:10px;"><input type="file" id="edit-imagem-file"
                        accept="image/*">
                    <div id="edit-img-preview-container"></div>
                </div><input type="hidden" id="edit-imagem-nome">
                <div class="filtro-grid">
                    <input type="text" id="edit-banca" list="lista-bancas" placeholder="Banca">
                    <input type="text" id="edit-instituicao" list="lista-instituicoes" placeholder="Institui√ß√£o">
                    <input type="number" id="edit-ano" placeholder="Ano">
                    <input type="text" id="edit-disciplina" list="lista-disciplinas" placeholder="Disciplina"
                        onchange="carregarAssuntos('edit')">
                </div>
                <div class="filtro-grid">
                    <input type="text" id="edit-assunto" list="lista-assuntos" placeholder="Assunto">
                    <select id="edit-dificuldade">
                        <option>F√°cil</option>
                        <option>M√©dio</option>
                        <option>Dif√≠cil</option>
                    </select>
                </div>
                <select id="edit-tipo" onchange="altTipo('edit')">
                    <option value="ME">M√∫ltipla</option>
                    <option value="CE">Certo/Errado</option>
                </select>
                <div id="edit-container-alt">
                    <div class="input-group"><span>A)</span><input type="text" id="edit-alt-a"
                            onfocus="showToolbar(this)"></div>
                    <div class="input-group"><span>B)</span><input type="text" id="edit-alt-b"
                            onfocus="showToolbar(this)"></div>
                    <div class="input-group"><span>C)</span><input type="text" id="edit-alt-c"
                            onfocus="showToolbar(this)"></div>
                    <div class="input-group"><span>D)</span><input type="text" id="edit-alt-d"
                            onfocus="showToolbar(this)"></div>
                    <div class="input-group"><span>E)</span><input type="text" id="edit-alt-e"
                            onfocus="showToolbar(this)"></div>
                </div><label>Gabarito:</label>
                <select id="edit-gabarito"></select>
                <label>Coment√°rios</label>
                <textarea id="edit-comentario-form" class="input-com-toolbar" rows="20" onfocus="showToolbar(this)"></textarea>
                <button class="btn-acao" style="background:#f39c12">Salvar</button>
            </form>
        </div>
    </div>

    <div id="modal-novo-texto" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close" onclick="el('modal-novo-texto').style.display='none'">&times;</span>
            <h2 id="titulo-modal-texto">Cadastrar Novo Texto</h2>

            <input type="hidden" id="edit-texto-id">

            <input type="text" id="novo-texto-titulo" class="imp-input input-com-toolbar" onfocus="showToolbar(this)" placeholder="T√≠tulo / Identificador (Ex: Texto 1 - Aula 05)">
            <textarea id="novo-texto-conteudo" class="imp-textarea input-com-toolbar" onfocus="showToolbar(this)" rows="10" placeholder="Cole o texto aqui..."></textarea>
            <button class="btn-padrao" id="btn-salvar-texto" onclick="salvarNovoTextoApi()" style="width:100%; margin-top:10px;">Salvar Texto</button>
        </div>
    </div>

    <div id="modal-anotacao" class="modal-overlay" style="display:none; z-index: 9999;">
        <div class="modal-content" style="max-width: 500px; border-left: 5px solid var(--purple);">
            <h3>üìì Caderno de Anota√ß√µes</h3>
            <p id="anotacao-info-questao" style="font-size: 0.85em; color: var(--sec); background: #f9f9f9; padding: 10px; border-radius: 4px;"></p>
            
            <label style="display:block; margin-top:15px; font-weight:bold;">O que deseja anotar sobre esta quest√£o?</label>
            <textarea id="nota-texto" class="imp-textarea" rows="5" placeholder="Ex: Esta quest√£o aborda o conceito X que costuma cair associado a Y..."></textarea>
            
            <div style="margin-top:15px; display:flex; gap:10px; justify-content:flex-end;">
                <button onclick="el('modal-anotacao').style.display='none'" class="btn-sec">Descartar</button>
                <button onclick="enviarParaCaderno()" class="btn-prim">Salvar Anota√ß√£o</button>
            </div>
        </div>
    </div>

    <div id="modal-comentario" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="el('modal-comentario').style.display='none'">&times;</span>
            <h3>Coment√°rios da Quest√£o</h3>
            <div id="view-comentario" class="render-html" style="margin-bottom:15px; padding:10px; background:#f4f4f9; border-radius:5px; min-height:50px;"></div>
            <textarea id="edit-comentario" class="input-com-toolbar" rows="5" placeholder="Adicione suas anota√ß√µes ou explica√ß√£o..." style="display:none"></textarea>
            <div style="margin-top:10px; text-align:right">
                <button id="btn-editar-coment" class="btn-acao" onclick="habilitarEdicaoComent()">Editar</button>
                <button id="btn-salvar-coment" class="btn-acao" onclick="salvarComentarioApi()" style="display:none; background:#27ae60">Salvar</button>
            </div>
        </div>
    </div>

    <div id="modal-flashcard-overlay" class="modal-overlay" style="display: none;">
        <div id="modal-janela" class="modal-content">
            
            <div id="modal-header" class="modal-header-drag">
                <span>Novo Flashcard</span>
                <span style="cursor: pointer;" onclick="fecharModalFlashcard()">‚úï</span>
            </div>

            <div class="modal-body">
                <label>Frente (Pergunta):</label>
                <textarea id="modal-front" rows="3"></textarea>
                
                <label>Verso (Resposta):</label>
                <textarea id="modal-back" rows="3"></textarea>
                
                <label>Tag:</label>
                <input type="text" id="modal-tag" placeholder="Ex: Petrobras...">

                <div class="modal-actions">
                    <button onclick="fecharModalFlashcard()" class="btn-cancelar">Cancelar</button>
                    <button onclick="salvarFlashcardRapido()" class="btn-salvar">Salvar</button>
                </div>
            </div>
        </div>
    </div>
    
    
    <script src="assets/js/core.js"></script>
    <script src="assets/js/cadastro.js"></script>
    <script src="assets/js/banco.js"></script>
    <script src="assets/js/praticar.js"></script>
    <script src="assets/js/flashcards.js"></script>
    <script src="assets/js/caderno.js"></script>
    <script src="assets/js/estatisticas.js"></script>
    <script src="assets/js/plano_estudos.js"></script>
</body>

</html>